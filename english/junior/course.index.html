<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯¾ç¨‹é¦–é¡µ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Microsoft YaHei', 'PingFang SC', 'Helvetica Neue', Arial, sans-serif; line-height: 1.6; color: #333; background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%); min-height: 100vh; }
        .container { max-width: 1100px; margin: 0 auto; padding: 24px; }
        .header { color: white; text-align: center; margin: 10px 0 30px; }
        .header h1 { font-size: 2.4rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .subtitle { opacity: 0.9; margin-top: 8px; }
        .toolbar { display: flex; justify-content: space-between; align-items: center; margin: 10px 0 16px; }
        .home-link { color: #fff; text-decoration: none; background: rgba(255,255,255,0.15); padding: 6px 12px; border-radius: 8px; }
        .search { flex: 1; margin-left: 12px; }
        .search input { width: 100%; padding: 10px 12px; border-radius: 10px; border: none; outline: none; box-shadow: 0 4px 16px rgba(0,0,0,0.12); }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 18px; margin-top: 16px; }
        .card { background: white; border-radius: 16px; padding: 18px; box-shadow: 0 12px 28px rgba(0,0,0,0.12); transition: transform .2s ease, box-shadow .2s ease; display: flex; flex-direction: column; }
        .card:hover { transform: translateY(-4px); box-shadow: 0 18px 32px rgba(0,0,0,0.18); }
        .card h3 { color: #185a9d; margin-bottom: 8px; font-size: 1.2rem; }
        .desc { color: #555; font-size: 0.95rem; margin-bottom: 10px; flex: 1; }
        .tags { margin-bottom: 12px; }
        .tag { display: inline-block; background: #e8f4ff; color: #185a9d; padding: 2px 8px; border-radius: 999px; font-size: 12px; margin-right: 6px; }
        .actions { display: flex; gap: 10px; }
        .btn { text-decoration: none; background: #185a9d; color: white; padding: 8px 12px; border-radius: 10px; font-size: 0.9rem; text-align: center; flex: 1; }
        .btn.secondary { background: #6c757d; }
        .empty { color: white; text-align: center; opacity: 0.9; margin-top: 30px; }
        .footer { text-align: center; color: white; opacity: 0.85; margin-top: 28px; }
        @media (max-width: 640px) { .header h1 { font-size: 1.8rem; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="toolbar">
            <a class="home-link" href="course.index.html">é¦–é¡µ</a>
            <div class="search"><input id="searchInput" type="search" placeholder="æœç´¢è¯¾ç¨‹ï¼ˆæ ‡é¢˜ã€æ ‡ç­¾ï¼‰"></div>
        </div>
        <div class="header">
            <h1>è¯¾ç¨‹é¦–é¡µ</h1>
            <div class="subtitle">åœ¨è¿™é‡Œæµè§ˆå’Œè¿›å…¥ä½ éœ€è¦çš„è¯¾ä»¶</div>
        </div>
        <div id="grid" class="grid"></div>
        <div id="empty" class="empty" style="display:none;">æœªæ‰¾åˆ°åŒ¹é…çš„è¯¾ç¨‹</div>
        <div class="footer">Â© 2025 SweetData è¯¾ç¨‹ä¸­å¿ƒ</div>
    </div>
    <script>
        const DEFAULT_COURSES = [
            {
                id: 'golden-grammar-adj-adv',
                title: 'é»„é‡‘è¯­æ³•ï¼šå½¢å®¹è¯&å‰¯è¯',
                description: 'å½¢å®¹è¯ä¸å‰¯è¯çš„ç³»ç»Ÿå­¦ä¹ ä¸äº’åŠ¨ç»ƒä¹ ',
                path: 'golden-grammar-adj-adv.html',
                tags: ['è¯­æ³•', 'å½¢å®¹è¯', 'å‰¯è¯']
            },
            {
                id: 'junior-grammar-fun-anime',
                title: 'åˆä¸­è¯­æ³•è¶£å‘³è¯¾ï¼šåŠ¨æ¼«å¸¦ä½ å­¦',
                description: 'è½»æ¾å¹½é»˜ã€åŠ¨æ¼«è§’è‰²å¼•å¯¼çš„åˆä¸­è¯­æ³•å…¥é—¨',
                path: 'junior-grammar-fun-anime.html',
                tags: ['åˆä¸­', 'è¶£å‘³', 'åŠ¨æ¼«']
            }
        ];

        async function loadCourses() {
            try {
                const res = await fetch('courses.json', { cache: 'no-cache' });
                const data = await res.json();
                const list = Array.isArray(data.courses) ? data.courses : [];
                return list.length ? list : DEFAULT_COURSES;
            } catch (e) {
                console.error(e);
                return DEFAULT_COURSES;
            }
        }
        function renderCourses(courses) {
            const grid = document.getElementById('grid');
            const empty = document.getElementById('empty');
            grid.innerHTML = '';
            if (!courses.length) { empty.style.display = 'block'; return; }
            empty.style.display = 'none';
            for (const c of courses) {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <h3>ğŸ“˜ ${c.title}</h3>
                    <div class="desc">${c.description || ''}</div>
                    <div class="tags">${(c.tags || []).map(t => `<span class='tag'>${t}</span>`).join('')}</div>
                    <div class="actions">
                        <a class="btn" href="${c.path}">è¿›å…¥</a>
                        <a class="btn secondary" href="${c.path}" target="_blank" rel="noopener">æ–°çª—å£</a>
                    </div>
                `;
                grid.appendChild(card);
            }
        }
        function buildSearchText(course) {
            return `${course.title} ${(course.description||'')} ${(course.tags||[]).join(' ')}`;
        }
        function normalize(text) {
            return (text || '').toLowerCase()
                .replace(/[\s\-_ï¼š:;ï¼›,ï¼Œ.ã€‚/\\|\[\]{}()ï¼ˆï¼‰'"â€œâ€â€˜â€™&@#?!ï¼ï¼ŸÂ·â€¢]+/g, '');
        }
        function setupSearch(allCourses) {
            const input = document.getElementById('searchInput');
            input.addEventListener('input', () => {
                const raw = input.value || '';
                const tokens = raw.trim().split(/\s+/).filter(Boolean);
                if (!tokens.length) {
                    renderCourses(allCourses);
                    return;
                }
                const filtered = allCourses.filter(c => {
                    const textN = normalize(buildSearchText(c));
                    return tokens.every(tok => textN.includes(normalize(tok)));
                });
                renderCourses(filtered);
            });
        }
        (async function init() {
            const courses = await loadCourses();
            renderCourses(courses);
            setupSearch(courses);
        })();
    </script>
</body>
</html>
